<div class="card p-4">
  <h2>Face Recognition Attendance</h2>

  <video #video id="video" width="720" height="560" autoplay muted></video>

  <div class="mt-4">
    <button class="btn btn-primary" (click)="captureImage()">ðŸ“¸ Capture & Check In</button>
  </div>

  <div *ngIf="message" class="mt-3 alert" [ngClass]="{
    'alert-success': isSuccess,
    'alert-danger': !isSuccess
  }">
    {{ message }}
  </div>
</div>

<div class="mt-4">
  <h3>Attendance History</h3>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Date</th>
        <th>Check-In Time</th>
        <th>Check-Out Time</th>
        <th>Total Hours Worked</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let record of timekeepingRecords">
        <td>{{ record.date | date: 'dd/MM/yyyy' }}</td>
        <td>{{ record.checkInTime | date: 'shortTime' }}</td>
        <td>{{ record.checkOutTime | date: 'shortTime' }}</td>
        <td>{{ record.totalHoursWorked | date: 'shortTime' }}</td>
        <td>{{ record.status }}</td>
      </tr>
    </tbody>
  </table>
</div>
<div class="mt-4">
  <h3>Manual Attendance Entry</h3>
  <form [formGroup]="TimekeepingForm" (ngSubmit)="submitTimekeeping()">
    <div class="mb-3">
      <label for="employeeId" class="form-label">Employee ID</label>
      <input type="text" id="employeeId" formControlName="employeeId" class="form-control" placeholder="Enter Employee ID" required>
    </div>
    <div class="mb-3">
      <label for="checkInTime" class="form-label">Check-In Time</label>
      <input type="time" id="checkInTime" formControlName="checkInTime" class="form-control" required>
    </div>
    <div class="mb-3">
      <label for="checkOutTime" class="form-label">Check-Out Time</label>
      <input type="time" id="checkOutTime" formControlName="checkOutTime" class="form-control" required>
    </div>
    <div class="mb-3">
      <label for="status" class="form-label">Status</label>
      <select id="status" formControlName="status" class="form-select" required>
        <option value="Present">Present</option>
        <option value="Absent">Absent</option>
        <option value="Late">Late</option>
        <option value="Early Leave">Early Leave</option>
      </select>
    </div>
    <div class="mb-3">
      <label for="note" class="form-label">Note</label>
      <textarea id="note" formControlName="note" class="form-control" placeholder="Enter any additional notes"></textarea>
    </div>
    <button type="submit" class="btn btn-success">Submit Attendance</button>
  </form>
</div>
