<div class="container-fluid p-4">
  <h2 class="mb-4">📞 Contact</h2>

  <p>If you have any problems or need assistance, please contact:</p>

  <ul class="list-group mb-4">
    <li class="list-group-item">
      📧 Email: <a href="mailto:support@yourcompany.com">Công ty TNHH 1 thành viên ĐHXD.com</a>
    </li>
    <li class="list-group-item">
      ☎️ Phone: <b>028-1234-5678</b>
    </li>
    <li class="list-group-item">
      🏢 Office: 55 Giải Phóng, Quận Hai Bà Trưng, Hà Nội
    </li>
  </ul>

  <h5>Send request directly:</h5>

  <form [formGroup]="contactForm" (ngSubmit)="onSubmit()" novalidate>
    <!-- Name Field -->
    <div class="mb-3">
      <label class="form-label">Name</label>
      <input
        type="text"
        formControlName="Name"
        class="form-control"
        [ngClass]="{ 'is-invalid': f['Name'].touched && f['Name'].errors }"
      />
      <div *ngIf="f['Name'].touched && f['Name'].errors" class="invalid-feedback">
        <div *ngIf="f['Name'].errors?.['required']">Name is required</div>
        <div *ngIf="f['Name'].errors?.['pattern']">Name can only contain letters and spaces</div>
      </div>
    </div>

    <!-- Email Field -->
    <div class="mb-3">
      <label class="form-label">Email</label>
      <input
        type="Email"
        formControlName="Email"
        class="form-control"
        [ngClass]="{ 'is-invalid': f['Email'].touched && f['Email'].errors }"
      />
      <div *ngIf="f['Email'].touched && f['Email'].errors" class="invalid-feedback">
        <div *ngIf="f['Email'].errors?.['required']">Email is required</div>
        <div *ngIf="f['Email'].errors?.['email']">Please enter a valid email address</div>
      </div>
    </div>

    <!-- Phone Number Field -->
    <div class="mb-3">
      <label class="form-label">Phone Number</label>
      <input
        type="text"
        formControlName="PhoneNumber"
        class="form-control"
        [ngClass]="{ 'is-invalid': f['PhoneNumber'].touched && f['PhoneNumber'].errors }"
      />
      <div *ngIf="f['PhoneNumber'].touched && f['PhoneNumber'].errors" class="invalid-feedback">
        <div *ngIf="f['PhoneNumber'].errors?.['required']">Phone number is required</div>
        <div *ngIf="f['PhoneNumber'].errors?.['pattern']">Phone number must be 10 digits</div>
      </div>
    </div>

    <!-- Message Field -->
    <div class="mb-3">
      <label class="form-label">Message</label>
      <textarea
        formControlName="Message"
        class="form-control"
        rows="4"
        [ngClass]="{ 'is-invalid': f['Message'].touched && f['Message'].errors }"
      ></textarea>
      <div *ngIf="f['Message'].touched && f['Message'].errors" class="invalid-feedback">
        <div *ngIf="f['Message'].errors?.['required']">Message is required</div>
        <div *ngIf="f['Message'].errors?.['maxLength']">Message cannot exceed 1000 characters</div>
      </div>
      <small class="text-muted">
        {{ contactForm.get('Message')?.value?.length || 0 }}/1000 characters
      </small>
    </div>

    <!-- CreatedAt Field -->
    <div class="mb-3">
      <h4 class="mt-3">Created At:</h4>
        <input type="date" class="form-control"
            formControlName="CreatedAt"
            required>
      <div *ngIf="f['CreatedAt'].touched && f['CreatedAt'].errors" class="invalid-feedback">
        <div *ngIf="f['CreatedAt'].errors?.['required']">Created At is required</div>
      </div>
    </div>

    <!-- Submit Button -->
    <button
      type="submit"
      class="btn btn-success"
      [disabled]="isSubmitting"
    >
      <span *ngIf="!isSubmitting">Send Contact</span>
      <span *ngIf="isSubmitting" class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
      <span *ngIf="isSubmitting"> Sending...</span>
    </button>

    <button
      type="button"
      class="btn btn-secondary ms-2"
      (click)="viewContactHistory()"
    >
      View Contact History
    </button>
  </form>
</div>

